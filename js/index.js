function bottleAndSlideAnimation(e){var t,i=e;e.hasClass("slide--first")?(t=e.attr("rel"),$("#nav").addClass("nav--above-bottle")):t=e.offset().top+e.outerHeight()-e.attr("rel")-bottleHeight,e.find(".will-animate").each(function(){$(this).addClass("prepare-for-animation")}),e.find(".phantom-bottle").removeClass("phantom-bottle--active"),e.hasClass("slide--fifth")&&$(person).removeClass("person--phantom"),bottleLoop(),$("#bottle-container").velocity({top:t},{duration:1e3,easing:"ease-in-out"}),e.hasClass("slide--first")&&($("#bottle").velocity({scale:[.6796296296296296,1]},{duration:1e3,easing:"ease-in-out"}),$("#bottle-container").addClass("bottle-container--first-slide"),$("#first-slide-sticker").addClass("sticker--over-bottle prepare-for-animation"),i=$("body"),$(".slide--active").hasClass("slide--last")&&$(".slide").each(function(){$(this).hasClass("slide--first")||$(this).hasClass("slide--last")||$(this).find(".phantom-bottle").removeClass("phantom-bottle--active")})),$(i).velocity("scroll",{duration:1e3,easing:"ease-in-out",complete:function(){$(".slide--active .will-animate").each(function(){$(this).attr("style",""),$(this).removeClass("prepare-for-animation")}),$(".slide--active .phantom-bottle").addClass("phantom-bottle--active"),$("#first-slide-sticker").attr("style",""),$(".person--active").addClass("person--phantom"),$(".person--active").removeClass("person--active"),e.hasClass("slide--first")&&$(".slide--active").hasClass("slide--last")&&$(".slide").each(function(){$(this).hasClass("slide--first")||$(this).hasClass("slide--last")||$(this).find(".phantom-bottle").addClass("phantom-bottle--active")}),$(".slide--active").removeClass("slide--active"),e.addClass("slide--active"),$("body").removeClass("not-scrollbar");var t=slidesAnimatingFunctions[e.attr("id")];t&&t()}})}function goToSlide(e){$("body").addClass("not-scrollbar"),$("#bottle-container").hasClass("bottle-container--first-slide")?($("#nav").removeClass("nav--above-bottle"),$(".will-animate--first").each(function(){$(this).removeClass("prepare-for-animation")}),$("#first-slide-sticker").removeClass("prepare-for-animation"),$("#bottle-container").velocity({top:slide1BottleTopOffset},{duration:750,easing:"ease",complete:function(){$("#bottle-container").removeClass("bottle-container--first-slide"),$("#first-slide-sticker").removeClass("sticker--over-bottle"),$("#bottle").velocity({scale:[1,.6796296296296296]},{duration:1e3,easing:"ease-in-out"}),bottleAndSlideAnimation(e)}})):bottleAndSlideAnimation(e)}function initFirstSlide(e){$("#first-slide-img").velocity({scale:[1,0],opacity:1},{duration:750,easing:[250,20]}),$("#first-slide-sticker").velocity({scale:[1,0],opacity:1},{delay:250,duration:750,easing:[250,20]}),$("#slide1__bottles").velocity({left:adaptiveElements.slide1.bottles.value,opacity:1},{delay:500,duration:750,easing:[250,20]}),$("#slide1__fact1").velocity({right:0,opacity:1},{delay:750,duration:750,easing:[250,20]}),$("#slide1__fact2").velocity({right:0,opacity:1},{delay:900,duration:750,easing:[250,20]})}function initSecondSlide(){$("#slide2__circle").velocity({scale:[1,0],opacity:1},{duration:750,easing:[250,20]}),$("#slide2__lower-third").velocity({scale:[1,0],opacity:1},{delay:250,duration:750,easing:[250,20]}),$("#slide2__info1").velocity({left:0,opacity:1},{delay:500,duration:750,easing:[250,20]}),$("#slide2__info2").velocity({left:0,opacity:1},{delay:650,duration:750,easing:[250,20]})}function initThirdSlide(){$("#slide3__circle").velocity({scale:[1,0],opacity:1},{duration:750,easing:[250,20]}),$("#slide3__header").velocity({left:0,opacity:1},{delay:250,duration:750,easing:[250,20]}),$("#slide3__info1").velocity({left:0,opacity:1},{delay:500,duration:750,easing:[250,20]}),$("#slide3__fact1").velocity({right:0,opacity:1},{delay:750,duration:750,easing:[250,20]}),$("#slide3__fact2").velocity({right:0,opacity:1},{delay:900,duration:750,easing:[250,20]}),$("#slide3__fact3").velocity({right:0,opacity:1},{delay:1050,duration:750,easing:[250,20]})}function initFourthSlide(){$("#slide4__circle").velocity({scale:[1,0],opacity:1},{duration:750,easing:[250,20]}),$("#slide4__header").velocity({left:0,opacity:1},{delay:250,duration:750,easing:[250,20]}),$("#slide4__info1").velocity({left:0,opacity:1},{delay:500,duration:750,easing:[250,20]}),$("#slide4__fact1").velocity({right:0,opacity:1},{delay:750,duration:750,easing:[250,20]}),$("#slide4__fact2").velocity({right:0,opacity:1},{delay:900,duration:750,easing:[250,20]}),$("#slide4__fact3").velocity({right:0,opacity:1},{delay:1050,duration:750,easing:[250,20]})}function initFifthSlide(){$(person).velocity({opacity:1},{duration:750,easing:"ease"}),$(person).addClass("person--active"),$("#slide5__lower-third").velocity({scale:[1,0],opacity:1},{delay:250,duration:750,easing:[250,20]})}function adaptiveValues(){var e=$(window).outerHeight();return slide1BottleTopOffset=190,adaptiveElements.slide1.bottles.value="30px",1045>=e&&(slide1BottleTopOffset=160),1e3>=e&&(slide1BottleTopOffset=130),900>=e&&(adaptiveElements.slide1.bottles.value="110px",slide1BottleTopOffset=45),799>=e&&(slide1BottleTopOffset=5),767>=e&&(adaptiveElements.slide1.bottles.value="135px",slide1BottleTopOffset=45),adaptiveElements.slide1.bottles.value}function changeBottlePosition(){var e=$(window).outerHeight(),t=$("#slide1");t.attr("rel","295"),1045>=e&&t.attr("rel","265"),1e3>=e&&t.attr("rel","235"),900>=e&&t.attr("rel","150"),799>=e&&t.attr("rel","110"),767>=e&&t.attr("rel","150");var i=$("#slide2"),a=$("#slide3"),o=$("#slide4");i.attr("rel","150"),a.attr("rel","150"),o.attr("rel","150"),945>=e&&(i.attr("rel","100"),a.attr("rel","100"),o.attr("rel","100")),875>=e&&(i.attr("rel","50"),a.attr("rel","50"),o.attr("rel","50"))}function generateRandomPerson(){var e=Math.floor(2*Math.random()),t=$(".person")[e];$(t).addClass("person--choosen"),$(t).addClass("person--phantom");var i=$(t).attr("rel");switch(i){case"left":$(".lower-third--big").addClass("lower-third--right");break;case"right":$(".lower-third--big").addClass("lower-third--left")}return t}function onWheel(e){if($(window).outerHeight()<650)return!0;if($(".velocity-animating").length)return!1;var t=$(window).scrollTop(),i=$(".slide--active").offset().top;if($(".slide--active").hasClass("slide--first")&&(i=0),$(".slide--active").hasClass("slide--last")){if(i>t){var a=$(".slide--active");return a.velocity("scroll",{duration:500,easing:"ease-in-out"}),!1}}else if(t!=i){var a=$(".slide--active");return a.hasClass("slide--first")&&(a=$("body")),a.velocity("scroll",{duration:500,easing:"ease-in-out"}),!1}if(e.originalEvent.deltaY<=0){var o=$(".slide--active").prev(),s=$("#footer");if(!s.hasClass("footer--active")&&o.length)return goToSlide(o),!1;if(s.hasClass("footer--active"))return $(".slide--last").velocity("scroll",{duration:500,easing:"ease-in-out"}),$("#footer").removeClass("footer--active"),!1}else{var l=$(".slide--active").next();if(l.length)return goToSlide(l),!1;if($(".slide--active").hasClass("slide--last"))return $("#footer").addClass("footer--active"),!0}}function onProgress(e,t){var i=Math.round(t/e*100);$("#progress-value").text(i),$("#progress-bar").css("width",i+"%"),$("#progress-bottle").css("height",100-i+"%")}var bottleFrame=function(e,t){e.css("visibility","hidden"),t.css("visibility","visible")},bottleLoop=function(){var e=$("#bottle_1"),t=$("#bottle_2"),i=$("#bottle_3"),a=$("#bottle_4"),o=$("#bottle_5"),s=$("#bottle_6"),l=$("#bottle_7"),r=$("#bottle_8"),n=$("#bottle_9"),d=$("#bottle_10"),c=$("#bottle_11"),f=$("#bottle_12"),v=$("#bottle_13"),u=$("#bottle_14"),h=$("#bottle_15");setTimeout(bottleFrame,65,e,t),setTimeout(bottleFrame,130,t,i),setTimeout(bottleFrame,195,i,a),setTimeout(bottleFrame,260,a,o),setTimeout(bottleFrame,325,o,s),setTimeout(bottleFrame,390,s,l),setTimeout(bottleFrame,455,l,r),setTimeout(bottleFrame,520,r,n),setTimeout(bottleFrame,585,n,d),setTimeout(bottleFrame,650,d,c),setTimeout(bottleFrame,715,c,f),setTimeout(bottleFrame,780,f,v),setTimeout(bottleFrame,845,v,u),setTimeout(bottleFrame,910,u,h),setTimeout(bottleFrame,975,h,e)},bottleHeight=$("#bottle-container").outerHeight(),slidesAnimatingFunctions={slide1:initFirstSlide,slide2:initSecondSlide,slide3:initThirdSlide,slide4:initFourthSlide,slide5:initFifthSlide},adaptiveElements={slide1:{bottles:{selector:"#slide1__bottles",property:"left",value:"30px"}}},slide1BottleTopOffset;changeBottlePosition(),adaptiveValues(),$(window).resize(function(){adaptiveValues(),changeBottlePosition();var e=$(".slide--active"),t=adaptiveElements[e.attr("id")];for(var i in t){var a=t[i].value,o=t[i].property,s=t[i].selector;$(s).css(o,a)}var l;bottleHeight=$("#bottle-container").outerHeight(),l=e.hasClass("slide--first")?e.attr("rel"):e.offset().top+e.outerHeight()-e.attr("rel")-bottleHeight,$("#bottle-container").css("top",l+"px"),e.hasClass("slide--first")?$("#header").velocity("scroll",{duration:0}):e.velocity("scroll",{duration:0})});var finishLoad=function(){$("#header").velocity("scroll",{duration:0}),$("body").removeClass("not-load"),$(".will-animate--first").each(function(){$(this).addClass("prepare-for-animation")}),$("#first-slide-sticker").addClass("prepare-for-animation"),$("#loader").fadeOut(function(){initFirstSlide(),$("#bottle-container").velocity({left:0,opacity:1},{delay:500,duration:750,easing:[250,20]})})},person=generateRandomPerson();$(document).keydown(function(e){var t=e.keyCode,i=[38,33],a=[40,34];if(i.indexOf(t)>=0||a.indexOf(t)>=0){if($(window).outerHeight()<650)return!0;if($(".velocity-animating").length)return!1;var o=$(window).scrollTop(),s=$(".slide--active").offset().top;if($(".slide--active").hasClass("slide--first")&&(s=0),$(".slide--active").hasClass("slide--last")){if(s>o){var l=$(".slide--active");return l.velocity("scroll",{duration:500,easing:"ease-in-out"}),!1}}else if(o!=s){var l=$(".slide--active");return l.hasClass("slide--first")&&(l=$("body")),l.velocity("scroll",{duration:500,easing:"ease-in-out"}),!1}if(a.indexOf(t)>=0){var r=$(".slide--active").next();if(r.length)return goToSlide(r),!1;if($(".slide--active").hasClass("slide--last"))return $("#footer").addClass("footer--active"),!0}if(i.indexOf(t)>=0){var n=$(".slide--active").prev(),d=$("#footer");if(!d.hasClass("footer--active")&&n.length)return goToSlide(n),!1;if(d.hasClass("footer--active"))return $(".slide--last").velocity("scroll",{duration:500,easing:"ease-in-out"}),$("#footer").removeClass("footer--active"),!1}}});var imgCount=$("body").find("img").length,loadedImgCount=1;$("body").hasClass("main-page")&&$("body").imagesLoaded().progress(function(e,t){onProgress(imgCount,loadedImgCount++),imgCount===loadedImgCount&&setTimeout(finishLoad,1e3)}),$(document).ready(function(){$("body").bind("wheel",onWheel),$(window).scroll(function(e){$(window).scrollTop()>=$("#slide2").offset().top?$("#fixed-nav").addClass("fixed-nav--active"):$("#fixed-nav").removeClass("fixed-nav--active")}),$("#scroll-down").click(function(){goToSlide($("#slide2"))}),$("#up").click(function(){$(".slide--last").hasClass("slide--active")?(goToSlide($("#slide1")),$("#footer").removeClass("footer--active")):$("#header").velocity("scroll",{duration:1e3,ease:"ease-in-out"})}),$("#show-callback").click(function(){$("#overlay").addClass("overlay--active"),$("#callback").addClass("modal--active"),$("#callback").find(".text-input").first().focus()}),$(".modal__close").click(function(){$(this).closest(".modal").removeClass("modal--active"),$("#overlay").removeClass("overlay--active")}),$("#lang-switcher").click(function(){var e=$(this),t=e.find(".switcher__ellipse");t.velocity("stop"),e.hasClass("switcher--on")?t.velocity({left:"1px"},350,function(){e.removeClass("switcher--on")}):t.velocity({left:"31px"},350,function(){e.addClass("switcher--on")})})});